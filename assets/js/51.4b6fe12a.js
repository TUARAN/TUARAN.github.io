(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{558:function(e,t,r){"use strict";r.r(t);var n=r(2),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h2",{attrs:{id:"前言"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),r("p",[e._v("源码阅读可能会迟到，但是一定不会缺席！")]),e._v(" "),r("p",[e._v("众所周知，以下代码就是 vue 的一种直接上手方式。通过 cdn 可以在线打开 vue.js。一个文件，一万行源码，能让万千开发者赖以生存，它究竟做了什么？让人品味。")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("<html>\n<head></head>\n<body>\n    <div id=\"app\">\n        {{ message }}\n    </div>\n</body>\n<script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"><\/script>\n<script>\n    var app = new Vue({\n        el: '#app',\n        data: {\n            message: 'See Vue again!'\n        },\n    })\n<\/script>\n</html>\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br"),r("span",{staticClass:"line-number"},[e._v("14")]),r("br"),r("span",{staticClass:"line-number"},[e._v("15")]),r("br"),r("span",{staticClass:"line-number"},[e._v("16")]),r("br"),r("span",{staticClass:"line-number"},[e._v("17")]),r("br")])]),r("p",[e._v("源码cdn地址："),r("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/vue/dist/vue.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://cdn.jsdelivr.net/npm/vue/dist/vue.js"),r("OutboundLink")],1),e._v("，当下版本：v2.6.11")]),e._v(" "),r("p",[e._v("选择生啃的原因是，自认为已经有一定的基础，且可以更自主地选择代码段分轻重来阅读，一方面测试自己的掌握程度，一方面追求更直观的源码阅读。")]),e._v(" "),r("p",[e._v("当然你也可以选择在 "),r("a",{attrs:{href:"https://github.com/vuejs/vue/tree/dev/src",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/vuejs/vue/tree/dev/src"),r("OutboundLink")],1),e._v(" 分模块的阅读，也可以看各路大神的归类整理。")]),e._v(" "),r("p",[e._v("笔者尽量按 500 行作为一个模块来形成一个 md 文件，结合注释、自己的理解、以及附上对应查询链接来逐行细读源码。")]),e._v(" "),r("p",[e._v("目的：自我梳理，分享交流。")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc1.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（1/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc2.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（2/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc3.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（3/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc4.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（4/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc5.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（5/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc6.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（6/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc7.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（7/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc8.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（8/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc9.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（9/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc10.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（10/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc11.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（11/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc12.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（12/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc13.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（13/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc14.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（14/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc15.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（15/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc16.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（16/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc17.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（17/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc18.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（18/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc19.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（19/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（20/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（21/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（22/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（23/24）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（24/24）"),r("OutboundLink")],1)])]),e._v(" "),r("h2",{attrs:{id:"正文"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#正文"}},[e._v("#")]),e._v(" 正文")]),e._v(" "),r("h3",{attrs:{id:"第-2962-行至第-3515-行"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#第-2962-行至第-3515-行"}},[e._v("#")]),e._v(" 第 2962 行至第 3515 行")]),e._v(" "),r("ul",[r("li",[e._v("FunctionalRenderContext// 创建一个包含渲染要素的函数")]),e._v(" "),r("li",[e._v("createFunctionalComponent")])]),e._v(" "),r("p",[e._v("函数式组件的实现")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("  Ctor,                                       //Ctro:组件的构造对象(Vue.extend()里的那个Sub函数)\n  propsData,                                  //propsData:父组件传递过来的数据(还未验证)\n  data,                                       //data:组件的数据\n  contextVm,                                  //contextVm:Vue实例 \n  children                                    //children:引用该组件时定义的子节点\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br")])]),r("p",[e._v("// createFunctionalComponent 最后会执行我们的 render 函数")]),e._v(" "),r("p",[e._v("特注：Vue 组件是 Vue 的核心之一")]),e._v(" "),r("p",[e._v("组件分为：异步组件和函数式组件")]),e._v(" "),r("p",[e._v("这里就是"),r("strong",[e._v("函数式组件相关")])]),e._v(" "),r("blockquote",[r("p",[e._v("Vue提供了一种可以让组件变为无状态、无实例的函数化组件。从原理上说，一般子组件都会经过实例化的过程，而单纯的函数组件并没有这个过程，它可以简单理解为一个中间层，只处理数据，不创建实例，也是由于这个行为，它的渲染开销会低很多。实际的应用场景是，当我们需要在多个组件中选择一个来代为渲染，或者在将children,props,data等数据传递给子组件前进行数据处理时，我们都可以用函数式组件来完成，它本质上也是对组件的一个外部包装。")])]),e._v(" "),r("p",[e._v("函数式组件会在组件的对象定义中，将functional属性设置为true，这个属性是区别普通组件和函数式组件的关键。同样的在遇到子组件占位符时，会进入createComponent进行子组件Vnode的创建。**由于functional属性的存在，代码会进入函数式组件的分支中，并返回createFunctionalComponent调用的结果。**注意，执行完createFunctionalComponent后，后续创建子Vnode的逻辑不会执行，这也是之后在创建真实节点过程中不会有子Vnode去实例化子组件的原因。(无实例)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://cn.vuejs.org/v2/guide/components-dynamic-async.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方说明"),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[e._v("cloneAndMarkFunctionalResult")]),e._v(" "),r("li",[e._v("mergeProps")]),e._v(" "),r("li",[e._v("componentVNodeHooks")]),e._v(" "),r("li",[e._v("createComponent\n// createComponent 方法创建一个组件的 VNode。这 createComponent 是创建子组件的关键")])]),e._v(" "),r("p",[e._v("// 创建组件的 VNode 时，若组件是函数式组件，则其 VNode 的创建过程将与普通组件有所区别。")]),e._v(" "),r("ul",[r("li",[e._v("createComponentInstanceForVnode // "),r("a",{attrs:{href:"https://github.com/HcySunYang/vue-design/issues/199",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("推荐阅读："),r("a",{attrs:{href:"https://juejin.im/post/5ca2437b51882543b7019f38#heading-7",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[r("p",[e._v("installComponentHooks // installComponentHooks就是把 componentVNodeHooks的钩子函数合并到data.hook中，，在合并过程中，如果某个时机的钩子已经存在data.hook中，那么通过执行mergeHook函数做合并勾子。")])]),e._v(" "),r("li",[r("p",[e._v("mergeHook$1")])]),e._v(" "),r("li",[r("p",[e._v("transformModel")])]),e._v(" "),r("li",[r("p",[e._v("createElement// 创建元素")])]),e._v(" "),r("li",[r("p",[e._v("_createElement")])]),e._v(" "),r("li",[r("p",[e._v("applyNS")])]),e._v(" "),r("li",[r("p",[e._v("registerDeepBindings")])]),e._v(" "),r("li",[r("p",[e._v("initRender // 初识渲染")])])]),e._v(" "),r("p",[r("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/79538534",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),r("OutboundLink")],1)]),e._v(" "),r("h3",{attrs:{id:"阶段小结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#阶段小结"}},[e._v("#")]),e._v(" 阶段小结")]),e._v(" "),r("p",[e._v("这一部分主要是围绕 Vue 的组件的创建。Vue 将页面划分成各类的组件，组件思想是 Vue 的精髓之一。")])])}),[],!1,null,null,null);t.default=a.exports}}]);