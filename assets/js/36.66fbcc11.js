(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{533:function(e,t,n){"use strict";n.r(t);var r=n(2),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h2",{attrs:{id:"前言"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),n("p",[e._v("源码阅读可能会迟到，但是一定不会缺席！")]),e._v(" "),n("p",[e._v("众所周知，以下代码就是 vue 的一种直接上手方式。通过 cdn 可以在线打开 vue.js。一个文件，一万行源码，能让万千开发者赖以生存，它究竟做了什么？让人品味。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("<html>\n<head></head>\n<body>\n    <div id=\"app\">\n        {{ message }}\n    </div>\n</body>\n<script src=\"https://cdn.jsdelivr.net/npm/vue/dist/vue.js\"><\/script>\n<script>\n    var app = new Vue({\n        el: '#app',\n        data: {\n            message: 'See Vue again!'\n        },\n    })\n<\/script>\n</html>\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br")])]),n("p",[e._v("源码cdn地址："),n("a",{attrs:{href:"https://cdn.jsdelivr.net/npm/vue/dist/vue.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://cdn.jsdelivr.net/npm/vue/dist/vue.js"),n("OutboundLink")],1),e._v("，当下版本：v2.6.11")]),e._v(" "),n("p",[e._v("选择生啃的原因是，自认为已经有一定的基础，且可以更自主地选择代码段分轻重来阅读，一方面测试自己的掌握程度，一方面追求更直观的源码阅读。")]),e._v(" "),n("p",[e._v("当然你也可以选择在 "),n("a",{attrs:{href:"https://github.com/vuejs/vue/tree/dev/src",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/vuejs/vue/tree/dev/src"),n("OutboundLink")],1),e._v(" 分模块的阅读，也可以看各路大神的归类整理。")]),e._v(" "),n("p",[e._v("笔者尽量按 500 行作为一个模块来形成一个 md 文件，结合注释、自己的理解、以及附上对应查询链接来逐行细读源码。")]),e._v(" "),n("p",[e._v("目的：自我梳理，分享交流。")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc1.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（1/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc2.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（2/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc3.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（3/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc4.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（4/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc5.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（5/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc6.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（6/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc7.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（7/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc8.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（8/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc9.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（9/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc10.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（10/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc11.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（11/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc12.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（12/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc13.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（13/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc14.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（14/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc15.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（15/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc16.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（16/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc17.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（17/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc18.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（18/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc19.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（19/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（20/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（21/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（22/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（23/24）"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("a",{attrs:{href:"https://tuaran.github.io/views/2020/studyVuesc20.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Vue.js v2.6.11 生啃一万行源码（24/24）"),n("OutboundLink")],1)])]),e._v(" "),n("h2",{attrs:{id:"正文"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#正文"}},[e._v("#")]),e._v(" 正文")]),e._v(" "),n("h3",{attrs:{id:"第-7071-行至第-7298-行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第-7071-行至第-7298-行"}},[e._v("#")]),e._v(" 第 7071 行至第 7298 行")]),e._v(" "),n("ul",[n("li",[e._v("getRawBindingAttr")]),e._v(" "),n("li",[e._v("getBindingAttr //  获取 :属性 或者v-bind:属性，或者获取属性 移除传进来的属性name，并且返回获取到 属性的值")]),e._v(" "),n("li",[e._v("getAndRemoveAttr // 移除传进来的属性name，并且返回获取到 属性的值")]),e._v(" "),n("li",[e._v("getAndRemoveAttrByRegex")]),e._v(" "),n("li",[e._v("rangeSetItem")]),e._v(" "),n("li",[e._v("genComponentModel // 为虚拟dom添加model属性")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("    /*\n    * Parse a v-model expression into a base path and a final key segment.\n    * Handles both dot-path and possible square brackets.\n    * 将 v-model 表达式解析为基路径和最后一个键段。\n    * 处理点路径和可能的方括号。\n    */\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("ul",[n("li",[e._v("parseModel //转义字符串对象拆分字符串对象  把后一位key分离出来")])]),e._v(" "),n("p",[e._v('// 如果数据是object.info.name的情况下 则返回是 {exp: "object.info",key: "name"}\n// 如果数据是object[info][name]的情况下 则返回是 {exp: "object[info]",key: "name"}')]),e._v(" "),n("ul",[n("li",[e._v("next")]),e._v(" "),n("li",[e._v("eof")]),e._v(" "),n("li",[e._v("parseBracket //检测 匹配[] 一对这样的=括号")]),e._v(" "),n("li",[e._v("parseString // 循环匹配一对''或者\"\"符号")])]),e._v(" "),n("p",[e._v("这一部分包括：原生指令 v-bind 和为虚拟 dom 添加 model 属性，以及格式校验工具函数。")]),e._v(" "),n("h3",{attrs:{id:"第-7300-行至第-7473-行"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第-7300-行至第-7473-行"}},[e._v("#")]),e._v(" 第 7300 行至第 7473 行")]),e._v(" "),n("ul",[n("li",[e._v("model")]),e._v(" "),n("li",[e._v('genCheckboxModel // 为input type="checkbox" 虚拟dom添加 change 函数 ，根据v-model是否是数组，调用change函数，调用 set 去更新 checked选中数据的值')]),e._v(" "),n("li",[e._v("genRadioModel // 为虚拟dom  inpu标签 type === 'radio' 添加change 事件 更新值")]),e._v(" "),n("li",[e._v("genSelect // 为虚拟dom添加change 函数 ，change 函数调用 set 去更新 select 选中数据的值")]),e._v(" "),n("li",[e._v("genDefaultModel //  如果虚拟dom标签是  'input' 类型不是checkbox，radio 或者是'textarea' 标签的时候，获取真实的dom的value值调用 change或者input方法执行set方法更新数据")])]),e._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/hao123456/p/10616356.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("参考link"),n("OutboundLink")],1)]),e._v(" "),n("h3",{attrs:{id:"阶段小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#阶段小结"}},[e._v("#")]),e._v(" 阶段小结")]),e._v(" "),n("ul",[n("li",[e._v("v-bind、v-model")])]),e._v(" "),n("p",[e._v("区别：")]),e._v(" "),n("ol",[n("li",[e._v("v-bind 用来绑定数据和属性以及表达式，缩写为'：'")]),e._v(" "),n("li",[e._v("v-model 使用在表单中，实现双向数据绑定的，在表单元素外使用不起作用")])]),e._v(" "),n("p",[e._v("Q：你知道v-model的原理吗？说说看")]),e._v(" "),n("p",[e._v("A: v-model本质上是语法糖，即利用v-model绑定数据，其实就是既绑定了数据，又添加了一个input事件监听 "),n("a",{attrs:{href:"https://github.com/haizlin/fe-interview/issues/560",target:"_blank",rel:"noopener noreferrer"}},[e._v("link"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[e._v("自定义指令钩子函数")])]),e._v(" "),n("p",[e._v("一个指令定义对象可以提供如下几个钩子函数 (均为可选)：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("1. bind：只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。\n2. inserted：被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。\n3. update：所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。指令的值可能发生了改变，也可能没有。但是你可以通过比较更新前后的值来忽略不必要的模板更新 (详细的钩子函数参数见下)。\n4. componentUpdated：指令所在组件的 VNode 及其子 VNode 全部更新后调用。\n5. unbind：只调用一次，指令与元素解绑时调用。\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("ul",[n("li",[e._v("指令钩子函数会被传入以下参数：")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('1. el：指令所绑定的元素，可以用来直接操作 DOM 。\n2. binding：一个对象，包含以下属性：\n     name：指令名，不包括 v- 前缀。\n     value：指令的绑定值，例如：v-my-directive="1 + 1" 中，绑定值为 2。\n     oldValue：指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。\n     expression：字符串形式的指令表达式。例如 v-my-directive="1 + 1" 中，表达式为 "1 + 1"。\n     arg：传给指令的参数，可选。例如 v-my-directive:foo 中，参数为 "foo"。\n     modifiers：一个包含修饰符的对象。例如：v-my-directive.foo.bar 中，修饰符对象为 { foo: true, bar: true }。\n3. vnode：Vue 编译生成的虚拟节点。移步 VNode API 来了解更多详情。\n4. oldVnode：上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br")])]),n("p",[e._v("除了 el 之外，其它参数都应该是只读的，切勿进行修改。如果需要在钩子之间共享数据，建议通过元素的 dataset 来进行。")]),e._v(" "),n("p",[n("a",{attrs:{href:"https://juejin.im/post/59ffbcc151882554b836ee21",target:"_blank",rel:"noopener noreferrer"}},[e._v("【译】vue 自定义指令的魅力"),n("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=s.exports}}]);